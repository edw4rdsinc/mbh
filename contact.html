<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO & Metadata -->
    <title>Contact Us | My Benefits Help</title>
    <meta name="description" content="Let's get you to the right place. Contact MBH for broker, employer, or employee benefits support.">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Contact Us | My Benefits Help">
    <meta property="og:description" content="Let's get you to the right place. Contact MBH for broker, employer, or employee benefits support.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.mybenefitshelp.net/contact.html">
    <meta property="og:image" content="https://www.mybenefitshelp.net/og-image.png"> <!-- Placeholder image path -->

    <!-- JSON-LD for Organization -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "My Benefits Help",
      "url": "https://www.mybenefitshelp.net",
      "sameAs": []
    }
    </script>

    <!-- Analytics Placeholders (Vercel/Google) -->
    <!-- 
    <script>
      // Vercel Analytics or Google Tag Manager script would go here
    </script>
    -->

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Work+Sans:wght@600;700&display=swap" rel="stylesheet">

    <style>
        /* 0) Brand & Styling Requirements */
        :root {
            --mbh-bg: #ffffff;
            --mbh-fg: #0f172a;      /* slate-900 */
            --mbh-muted: #475569;   /* slate-600 */
            --mbh-primary: #00529b; /* Derived from logo - strong blue */
            --mbh-accent: #0891b2;  /* Complimentary cyan */
            --mbh-action: #E87A5D;  /* Terracotta for CTAs */
            --mbh-bg-alt: #F5F5F5;  /* Warm Light Gray */
            --mbh-border: #e2e8f0;  /* slate-200 */
            --mbh-card: #ffffff;
            --header-height: 72px;
        }

        /* 1) Base & Accessibility */
        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--mbh-bg);
            color: var(--mbh-fg);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--mbh-primary);
            color: white;
            padding: 8px;
            z-index: 100;
            transition: top 0.3s;
        }

        .skip-link:focus {
            top: 0;
        }

        /* 2) Typography */
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Work Sans', sans-serif;
            font-weight: 700;
            line-height: 1.2;
            color: var(--mbh-fg);
        }

        h1 { font-size: clamp(2.5rem, 5vw, 3.5rem); }
        h2 { font-size: clamp(2rem, 4vw, 2.75rem); }
        h3 { font-size: clamp(1.25rem, 3vw, 1.5rem); }

        p {
            margin-bottom: 1rem;
            color: var(--mbh-muted);
            max-width: 65ch;
        }

        a {
            color: var(--mbh-primary);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.2s ease;
        }
        a:hover, a:focus-visible {
            text-decoration: underline;
            color: var(--mbh-accent);
        }

        /* 3) Layout & Components */
        .container {
            width: 100%;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
            padding-left: 1.5rem;
            padding-right: 1.5rem;
        }

        section {
            padding-top: clamp(4rem, 10vw, 6rem);
            padding-bottom: clamp(4rem, 10vw, 6rem);
        }
        
        /* Background Utilities */
        .bg-alt {
            background-color: var(--mbh-bg-alt);
        }
        .bg-gradient-to-alt {
            background: linear-gradient(to bottom, var(--mbh-bg) 0%, var(--mbh-bg-alt) 100%);
        }
        .bg-gradient-to-main {
            background: linear-gradient(to bottom, var(--mbh-bg-alt) 0%, var(--mbh-bg) 100%);
        }

        .section-hero {
            text-align: center;
            padding-top: calc(var(--header-height) + 4rem);
        }
        
        .section-hero .subheadline {
            font-size: 1.25rem;
            color: var(--mbh-muted);
            margin-top: 1rem;
        }

        .btn {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            font-weight: 600;
            text-decoration: none;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            cursor: pointer;
            border: 1px solid transparent;
        }
        .btn:hover, .btn:focus-visible {
            transform: scale(1.02);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            text-decoration: none;
        }
        .btn-primary {
            background-color: var(--mbh-primary);
            color: var(--mbh-bg);
        }
        .btn-action {
            background-color: var(--mbh-action);
            color: var(--mbh-bg);
        }
        .btn-secondary {
            background-color: transparent;
            color: var(--mbh-primary);
            border-color: var(--mbh-border);
        }

        .card {
            background-color: var(--mbh-card);
            border: 1px solid var(--mbh-border);
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05), 0 2px 4px -2px rgba(0,0,0,0.05);
        }

        /* 4) Header & Navigation */
        .site-header {
            position: sticky;
            top: 0;
            width: 100%;
            z-index: 50;
            background-color: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-bottom: 1px solid transparent;
            transition: border-color 0.3s ease, background-color 0.3s ease;
        }

        .site-header.scrolled {
            border-bottom-color: var(--mbh-border);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: var(--header-height);
        }

        .logo-link .logo-img {
            height: 60px; /* Increased from 40px */
            width: auto;
            display: block;
        }

        .nav-links {
            display: none; /* Hidden on mobile */
            list-style: none;
            gap: 2rem;
        }

        .nav-links a {
            font-weight: 600;
            color: var(--mbh-muted);
            position: relative;
        }
        .nav-links a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--mbh-primary);
            transition: width 0.3s ease;
        }
        .nav-links a:hover::after, .nav-links a:focus-visible::after {
            width: 100%;
        }

        .menu-toggle {
            display: block; /* Visible on mobile */
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
        }
        .menu-toggle .icon-bar {
            display: block;
            width: 25px;
            height: 3px;
            background-color: var(--mbh-fg);
            margin: 5px 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        
        .mobile-menu {
            display: none;
            position: absolute;
            top: var(--header-height);
            left: 0;
            right: 0;
            background-color: var(--mbh-bg);
            border-bottom: 1px solid var(--mbh-border);
            padding: 1rem 0;
        }

        .mobile-menu.is-open {
            display: block;
        }

        .mobile-nav-links {
            list-style: none;
            text-align: center;
        }

        .mobile-nav-links li {
            padding: 1rem 0;
        }

        .mobile-nav-links a {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--mbh-fg);
        }
        
        /* Menu toggle animation */
        body.menu-open .menu-toggle .icon-bar:nth-child(1) {
            transform: translateY(8px) rotate(45deg);
        }
        body.menu-open .menu-toggle .icon-bar:nth-child(2) {
            opacity: 0;
        }
        body.menu-open .menu-toggle .icon-bar:nth-child(3) {
            transform: translateY(-8px) rotate(-45deg);
        }

        @media (min-width: 768px) {
            .menu-toggle, .mobile-menu {
                display: none;
            }
            .nav-links {
                display: flex;
            }
        }

        /* 5) Section-Specific Styles */
        .contact-paths {
            display: grid;
            gap: 2rem;
            margin-top: 3rem;
        }
        .path-card {
            background-color: var(--mbh-card);
            border: 2px solid var(--mbh-border);
            border-radius: 1rem;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .path-card:hover {
            border-color: var(--mbh-primary);
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        .path-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
        .path-card h3 {
            margin-bottom: 0.5rem;
            color: var(--mbh-primary);
        }
        .path-card p {
            margin-bottom: 1.5rem;
            max-width: none;
        }
        .path-note {
            font-size: 0.85rem;
            color: var(--mbh-muted);
            margin-top: 0.5rem;
        }
        @media (min-width: 768px) {
            .contact-paths {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .contact-grid {
            display: grid;
            gap: 2rem;
            margin-top: 3rem;
            align-items: start;
        }
        .contact-options a {
            display: block;
            padding: 1rem;
            border: 1px solid var(--mbh-border);
            border-radius: 0.5rem;
            transition: all 0.2s;
            margin-bottom: 1rem;
        }
        .contact-options a:hover {
            background-color: #f8fafc; /* slate-50 */
            border-color: var(--mbh-primary);
            text-decoration: none;
        }
        .contact-options a span {
            color: var(--mbh-muted);
            font-size: 0.9rem;
        }
        .priority-contact {
            background-color: var(--mbh-action) !important;
            color: white !important;
            font-weight: bold;
            border-color: var(--mbh-action) !important;
        }
        .priority-contact span {
            color: rgba(255,255,255,0.9) !important;
        }
        .priority-contact:hover {
            background-color: var(--mbh-primary) !important;
            transform: scale(1.02);
        }

        .contact-details h4 {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            color: var(--mbh-primary);
        }

        /* Responsive Form Grid */
        .contact-form {
            display: grid;
            grid-template-columns: 1fr; /* Default to 1 column for mobile */
            gap: 1rem;
        }
        .form-field {
            display: flex;
            flex-direction: column;
        }
        .contact-form label {
            font-weight: 500;
            margin-bottom: 0.25rem;
        }
        .contact-form input, .contact-form textarea, .contact-form select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--mbh-border);
            border-radius: 0.5rem;
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
        }
        .contact-form input:focus, .contact-form textarea:focus, .contact-form select:focus {
            outline: 2px solid var(--mbh-primary);
            outline-offset: 2px;
            border-color: var(--mbh-primary);
        }

        .span-full {
            grid-column: 1 / -1; /* Make element span all columns */
        }
        
        @media (min-width: 768px) {
            .contact-form {
                grid-template-columns: repeat(2, 1fr); /* 2 columns on desktop */
            }
        }
        
        /* Urgency Selector Styling */
        .urgency-options {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }
        .urgency-options label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem;
            border: 1px solid var(--mbh-border);
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .urgency-options label:hover {
            background-color: #f8fafc;
            border-color: var(--mbh-primary);
        }
        .urgency-options input[type="radio"] {
            width: auto;
            margin: 0;
        }
        
        @media (min-width: 1024px) {
            .contact-grid {
                grid-template-columns: 1fr 1.5fr; /* Make form wider */
            }
        }
        
        /* Success State & Form Status Styles */
        .form-status {
            margin-top: 1rem;
            text-align: center;
            font-weight: 500;
        }


        /* 6) Footer */
        .site-footer {
            background-color: var(--mbh-bg-alt);
            border-top: 1px solid var(--mbh-border);
            padding: 3rem 0;
            color: var(--mbh-muted);
        }
        .footer-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2rem;
            text-align: center;
        }
        .footer-logo img {
            height: 48px; /* Increased from 32px */
            width: auto;
        }
        .footer-text p {
            margin: 0;
        }
        .footer-text .copyright {
            margin-top: 1rem;
            font-size: 0.9rem;
        }
        @media (min-width: 768px) {
            .footer-container {
                flex-direction: row;
                justify-content: space-between;
                text-align: left;
            }
            .footer-text {
                text-align: right;
            }
        }

        /* 7) Animations */
        .animate-on-scroll {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .animate-on-scroll.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Helper class */
        .text-center { text-align: center; }
        .mx-auto { margin-left: auto; margin-right: auto; }
        .mt-4 { margin-top: 1rem; }
        .mt-6 { margin-top: 1.5rem; }
    </style>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Header -->
    <header class="site-header" id="site-header">
        <div class="container header-content">
            <a href="index.html" class="logo-link">
                <img src="Images/logo-no-tagline.png" alt="My Benefits Help logo" class="logo-img">
            </a>
            <nav aria-label="Main navigation">
                <ul class="nav-links">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="brokers.html">Brokers</a></li>
                    <li><a href="employers.html">Employers</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </nav>
            <button class="menu-toggle" aria-label="Open navigation menu" aria-expanded="false" aria-controls="mobile-menu">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>
        <div class="mobile-menu" id="mobile-menu">
            <ul class="mobile-nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="brokers.html">Brokers</a></li>
                <li><a href="employers.html">Employers</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </div>
    </header>

    <main id="main-content">

        <!-- F) Contact -->
        <section class="section-hero">
            <div class="container">
                <h1 class="animate-on-scroll">Let's get you to the right place.</h1>
                <p class="subheadline mx-auto animate-on-scroll" style="transition-delay: 100ms;">Whether you're a broker, employer, or employee, we'll make sure your message reaches the right person.</p>
            </div>
        </section>

        <!-- Contact Paths Section -->
        <section class="bg-gradient-to-alt">
            <div class="container">
                 <h2 class="text-center animate-on-scroll">Who are you?</h2>
                <div class="contact-paths">
                    <div class="path-card animate-on-scroll" data-audience="broker">
                        <div class="path-icon">🤝</div>
                        <h3>Brokers</h3>
                        <p>Partnership inquiries & service questions</p>
                        <a href="#contact-form" class="btn btn-primary" onclick="selectAudience('broker-partnership')">Get Broker Info</a>
                    </div>
                    <div class="path-card animate-on-scroll" data-audience="employer" style="transition-delay: 100ms;">
                        <div class="path-icon">🏢</div>
                        <h3>Employers</h3>
                        <p>Benefits support & employee questions</p>
                        <a href="#contact-form" class="btn btn-primary" onclick="selectAudience('employer-support')">Get Help Now</a>
                    </div>
                    <div class="path-card animate-on-scroll" data-audience="employee" style="transition-delay: 200ms;">
                        <div class="path-icon">👤</div>
                        <h3>Employees</h3>
                        <p>Benefits questions & claims support</p>
                        <a href="tel:+1-833-436-2334" class="btn btn-action">Call Now</a>
                        <p class="path-note">For immediate help with your benefits</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Form Section -->
        <section id="contact-form" class="bg-alt">
            <div class="container">
                <div class="contact-grid">
                    <div class="contact-info animate-on-scroll">
                        <h3>Quick Contact Options</h3>
                        <div class="contact-options mt-4">
                            <a href="tel:+1-833-436-2334" class="priority-contact">📞 Call MBH Support<br><span>(833) 436-2334</span></a>
                            <a href="mailto:info@mybenefitshelp.net">📩 Email Us<br><span>info@mybenefitshelp.net</span></a>
                        </div>
                        
                        <div class="contact-details mt-6">
                            <h4>Response Times</h4>
                            <ul style="list-style: none; padding: 0; margin: 0;">
                                <li style="padding: 0.5rem 0; border-bottom: 1px solid var(--mbh-border);">
                                    <strong>Phone:</strong> Immediate during business hours
                                </li>
                                <li style="padding: 0.5rem 0; border-bottom: 1px solid var(--mbh-border);">
                                    <strong>Email:</strong> Within 4 business hours
                                </li>
                                <li style="padding: 0.5rem 0;">
                                    <strong>Forms:</strong> Within 2 business hours
                                </li>
                            </ul>
                             <p class="mx-auto" style="font-size: 0.9rem; margin-top: 2rem;">
                                <strong>Business Hours:</strong> Monday - Friday, 9:00 AM - 5:00 PM PST
                            </p>
                        </div>
                    </div>
                    
                    <div class="card animate-on-scroll" style="transition-delay: 100ms;">
                        <!-- Success State (Initially Hidden) -->
                        <div class="success-state" id="thankYou" style="display:none;">
                            <!-- Success message is injected by JS -->
                        </div>

                        <!-- Contact Form (Initially Visible) -->
                        <div id="contactFormContainer">
                            <h3>Send Us a Message</h3>
                            <form id="contactForm" class="contact-form" method="POST">
                                <div class="form-field span-full">
                                    <label for="audience">I need help with: *</label>
                                    <select id="audience" name="audience" required>
                                        <option value="">Select one...</option>
                                        <option value="broker-partnership">🤝 Broker Partnership</option>
                                        <option value="employer-support">🏢 Employee Benefits Support</option>
                                        <option value="claims-help">🩺 Claims & Coverage Questions</option>
                                        <option value="other">❓ Something Else</option>
                                    </select>
                                </div>
                                
                                <div class="form-field">
                                    <label for="name">Name *</label>
                                    <input type="text" id="name" name="name" required>
                                </div>
                                
                                <div class="form-field">
                                    <label for="email">Email *</label>
                                    <input type="email" id="email" name="email" required>
                                </div>
                               
                               <div class="form-field span-full" id="conditionalFields">
                                   <!-- Dynamic fields will be injected here -->
                               </div>

                                <div class="form-field span-full">
                                    <label for="message">Message *</label>
                                    <textarea id="message" name="message" rows="5" required placeholder="Tell us how we can help you..."></textarea>
                                </div>

                                <div class="form-field span-full">
                                     <label>How urgent is this?</label>
                                    <div class="urgency-options">
                                        <label><input type="radio" name="urgency" value="urgent"> 🔴 Urgent (call me today)</label>
                                        <label><input type="radio" name="urgency" value="soon"> 🟡 Soon (within 2-3 days)</label>
                                        <label><input type="radio" name="urgency" value="general" checked> 🟢 General inquiry</label>
                                    </div>
                                </div>
                                
                                <div class="form-field span-full">
                                    <button type="submit" class="btn btn-primary">Send Message</button>
                                </div>
                                
                                <div id="formStatus" class="form-status span-full"></div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="container footer-container">
            <div class="footer-logo">
                 <a href="index.html">
                    <img src="Images/logo-no-tagline.png" alt="My Benefits Help logo">
                </a>
            </div>
            <div class="footer-text">
                <p><strong>My Benefits Help</strong> | Smarter, simpler benefits service.</p>
                <p class="copyright">&copy; <span id="year"></span> My Benefits Help. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        'use strict';

        document.addEventListener('DOMContentLoaded', function() {

            // Set current year in footer
            document.getElementById('year').textContent = new Date().getFullYear();

            // Mobile Menu Toggle
            const menuToggle = document.querySelector('.menu-toggle');
            const mobileMenu = document.getElementById('mobile-menu');
            if (menuToggle) {
                menuToggle.addEventListener('click', function() {
                    const isExpanded = menuToggle.getAttribute('aria-expanded') === 'true';
                    menuToggle.setAttribute('aria-expanded', !isExpanded);
                    mobileMenu.classList.toggle('is-open');
                    document.body.classList.toggle('menu-open');
                });
            }

            // Header scroll effect
            const header = document.getElementById('site-header');
            if (header) {
                window.addEventListener('scroll', () => {
                    if (window.scrollY > 10) {
                        header.classList.add('scrolled');
                    } else {
                        header.classList.remove('scrolled');
                    }
                });
            }
            
            // Animate elements on scroll
            const scrollElements = document.querySelectorAll('.animate-on-scroll');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                    }
                });
            }, {
                threshold: 0.1
            });
            scrollElements.forEach(el => observer.observe(el));


            // Contact Form Logic
            const contactForm = document.getElementById('contactForm');
            const audienceSelect = document.getElementById('audience');
            const conditionalFields = document.getElementById('conditionalFields');

            if (audienceSelect) {
                audienceSelect.addEventListener('change', function(e) {
                    updateConditionalFields(e.target.value);
                });
            }
            
            window.selectAudience = function(audienceType) {
                if (audienceSelect) {
                    audienceSelect.value = audienceType;
                    audienceSelect.dispatchEvent(new Event('change'));
                    const formContainer = document.getElementById('contact-form');
                    if (formContainer) {
                        formContainer.scrollIntoView({ behavior: 'smooth' });
                    }
                }
            };
            
            function updateConditionalFields(audience) {
                let additionalFieldsHTML = '';
                
                // This function dynamically creates the HTML for the form fields
                // based on the user's selection, and injects it into the conditionalFields div.
                // It's structured to work with the new CSS grid layout.
                
                if (audience === 'broker-partnership') {
                    additionalFieldsHTML = `
                        <div class="contact-form" style="gap: 1rem; margin-top: 1rem;">
                            <div class="form-field">
                                <label for="company">Agency Name</label>
                                <input type="text" id="company" name="company" placeholder="Your agency name">
                            </div>
                            <div class="form-field">
                                <label for="groupCount">Approx. number of groups</label>
                                <select id="groupCount" name="groupCount">
                                    <option value="">Select range...</option>
                                    <option value="1-10">1-10</option>
                                    <option value="11-25">11-25</option>
                                    <option value="26-50">26-50</option>
                                    <option value="51-100">51-100</option>
                                    <option value="100+">100+</option>
                                </select>
                            </div>
                        </div>
                    `;
                } else if (audience === 'employer-support' || audience === 'claims-help' || audience === 'other') {
                    additionalFieldsHTML = `
                        <div class="contact-form" style="gap: 1rem; margin-top: 1rem;">
                            <div class="form-field span-full">
                                <label for="employerName">Employer/Group Name</label>
                                <input type="text" id="employerName" name="employerName" placeholder="e.g., Acme Corp">
                            </div>
                        </div>
                    `;
                }
                
                conditionalFields.innerHTML = additionalFieldsHTML;
            }

            // Handle form submission with Fetch API for a smooth UX
            if (contactForm) {
                contactForm.addEventListener('submit', function(e) {
                    e.preventDefault();

                    const form = e.target;
                    const formData = new FormData(form);
                    const data = Object.fromEntries(formData.entries()); // Convert form data to a plain object
                    
                    const statusDiv = document.getElementById('formStatus');
                    const formContainer = document.getElementById('contactFormContainer');
                    const thankYouDiv = document.getElementById('thankYou');
                    const submitButton = form.querySelector('button[type="submit"]');

                    statusDiv.innerHTML = 'Sending...';
                    statusDiv.style.color = 'var(--mbh-muted)';
                    submitButton.disabled = true;

                    fetch('/api/send-email', { // This now points to your Vercel function
                        method: 'POST',
                        body: JSON.stringify(data), // Send data as a JSON string
                        headers: {
                            'Content-Type': 'application/json'
                        }
                    }).then(response => {
                        if (response.ok) {
                            statusDiv.innerHTML = '';
                            formContainer.style.display = 'none';
                            thankYouDiv.innerHTML = `
                                <div style="text-align: center;">
                                    <h3>✅ Thank You!</h3>
                                    <p>Your message has been sent successfully. We'll get back to you within 2 business hours.</p>
                                </div>
                            `;
                            thankYouDiv.style.display = 'block';
                            form.reset();
                            updateConditionalFields(''); // Clear conditional fields
                        } else {
                           response.json().then(data => {
                                statusDiv.innerHTML = data.error || "Oops! There was a problem submitting your form.";
                                statusDiv.style.color = 'red';
                            });
                        }
                    }).catch(error => {
                        statusDiv.innerHTML = "Oops! There was a problem submitting your form.";
                        statusDiv.style.color = 'red';
                    }).finally(() => {
                        submitButton.disabled = false; // Re-enable the button
                    });
                });
            }

            // Initial call to set fields if a value is pre-selected (e.g., from URL)
            if (audienceSelect) {
                updateConditionalFields(audienceSelect.value);
            }
        });
    </script>

</body>
</html>

